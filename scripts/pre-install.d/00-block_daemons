#!/bin/bash
# Prevent package installs from starting daemons

set -e
set -o xtrace

mv /sbin/start-stop-daemon /sbin/start-stop-daemon.REAL
dd of=/sbin/start-stop-daemon <<EOF
#!/bin/sh
echo
echo "Warning: Fake start-stop-daemon called, doing nothing"
EOF
chmod 755 /sbin/start-stop-daemon

mv /sbin/initctl /sbin/initctl.REAL
dd of=/sbin/initctl <<EOF
#!/bin/sh
echo "initctl (tripleo 1.0)"
echo "Warning: Fake initctl called, doing nothing"
EOF
chmod 755 /sbin/initctl

mv /usr/sbin/invoke-rc.d /usr/sbin/invoke-rc.d.REAL
dd of=/usr/sbin/invoke-rc.d <<EOF
#!/bin/sh
echo "invoke-rc.d (tripleo 1.0)"
echo "Warning: Fake inovke-rc.d called, doing nothing"
EOF
chmod 755 /usr/sbin/invoke-rc.d
